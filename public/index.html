<!doctype html>

<!-- ASSIGN OUR ANGULAR MODULE -->
<html ng-app="UsvaHomeApp">
<head>
	<!-- META -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Optimize mobile viewport -->

	<title>Simple Home Automation</title>

	<!-- SCROLLS -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"><!-- load bootstrap -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css">
		
	<style>
		html 					{ overflow-y:scroll; }
		body 					{ padding-top:50px; }
		#sensors-list 			{ margin-bottom:30px; }
		#relays-list 			{ margin-bottom:30px; }
		#todo-form 	 			{ margin-bottom:50px; }
	</style>

	<!-- SPELLS -->
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script><!-- load angular -->
	<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.2/raphael-min.js"></script>
	<script type="text/javascript" src="js/kuma-gauge.jquery.js"></script>
	<script src="js/controllers/main.js"></script>     <!-- load up our controller -->
	<script src="js/services/sensors.js"></script>     <!-- load our sensors service stub for REST API -->
	<script src="js/services/relays.js"></script>      <!-- load our relays service stub for REST API -->


</head>
<!-- SET THE CONTROLLER -->
<body>
	<div class="container">

		<!-- HEADER AND TODO COUNT -->
		<div class="page-header">
			<h1><img src="./images/home.gif"  width="256" height="256"></img>Home App</span></h1>
		</div>

		<!-- SENSORS LIST -->
		<div id="sensors-list" class="panel panel-default" ng-controller="sensorsController">
			<div class="panel-heading">Activated Sensors</div>
			
			<div class="panel-body">  
			    <tbody style="font-size: 12px">
                    <tr>
				        <!-- LOOP OVER THE SENSORS IN $scope.sensors -->
				        <div class="checkbox" ng-repeat="sensor in sensors">
					        <td>{{ sensor.name }}</td>
					        <td>
					        	<!-- generate a slot for gauge -->
					        	<div ng-class="{{ sensor.name | generateGaugeDiv }}"></div>
					        </td>
				        </div>
				        <!-- LOOP OVER THE SENSORS IN $scope.sensors IN ORDER TO POPULATE DATA AND ACTIVATE CLIENT SIDE REFRESHER -->
				        <div class="checkbox" ng-repeat="sensor in sensors">
				        	<div ng="{{ writeGauge(sensor) }}"></div>
				        </div>
				        <!-- <timer interval="2000" ng="{{getSensors}}"></timer> -->
					</tr>
				</tbody>
			</div>
		</div>
		
		<!-- RELAYS LIST -->
		<div id="relays-list" class="panel panel-default" ng-controller="relaysController">
			<div class="panel-heading">Lighting Relays</div>
			
			<div class="panel-body">
			    <div class="container-fluid">
    				<!-- LOOP OVER THE RELAYS IN $scope.relays -->
    				<div class="checkbox" ng-repeat="relay in relays">
    					<label>
    						<div ng-if="relay.value">
                                <input type="checkbox" ng-click="put(relay.name, false)" checked>
                            </div>
                            <div ng-if="!relay.value">
                                <input type="checkbox" ng-click="put(relay.name, true)">
                            </div>
    						
    						{{ relay.name }}
    					</label>
    				</div>
    			</div>
			</div>
		</div>

		<div class="text-center text-muted">
			<p>A demo by <a href="https://ide.c9.io/laitinenp">Usva Software Co</a>.</p>
			<p>Read the <a href="https://ide.c9.io/laitinenp">tutorial</a>.</p>
		</div>

	</div>

	<!-- WRITE GAUGE VALUES TO THE SLOTS -->
	<script>
		//angular.element(document.getElementById('sensorsController')).scope().writeGauges();
	</script>
</body>
</html>
